<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novamart Documentation</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">Novamart Docs</div>
            <ul class="nav-links">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#api">Novamart API</a></li>
                <li><a href="#api-deep-dive">API Deep Dive</a></li>
                <li><a href="#storefront">Novamart Storefront</a></li>
                <li><a href="#admin">Novamart Admin Panel</a></li>
                <li><a href="#admin-deep-dive">Admin Deep Dive</a></li>
            </ul>
        </aside>

        <main>
            <header id="overview">
                <h1>Novamart Project<br>Documentation</h1>
                <p class="subtitle">A comprehensive guide to the Novamart e-commerce ecosystem, including API, Storefront, and Admin Panel.</p>
            </header>

            <section id="api">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>
                    1. Novamart API
                </h2>
                <p>The backend server handling data, authentication, and business logic.</p>
                <p><strong>Tech Stack:</strong> Node.js, Express, MongoDB, Mongoose.</p>

                <h3>Folder Structure & File Descriptions</h3>
                
                <h4>Root Directory</h4>
                <ul>
                    <li><code>app.js</code>: <strong>Main Entry Point</strong>. Initializes Express, connects to MongoDB, and mounts routes.</li>
                    <li><code>.env</code>: Environment variables (DB URI, Port, Secrets).</li>
                </ul>

                <h4>routes/ (API Endpoints)</h4>
                <ul>
                    <li><code>auth.js</code>: Handles user registration (<code>/register</code>), login (<code>/login</code>), and token verification.</li>
                    <li><code>products.js</code>: CRUD operations for products. Handles search, filtering, and image uploads.</li>
                    <li><code>orders.js</code>: Manages order creation, status updates, and retrieval.</li>
                    <li><code>categories.js</code>: Manages product categories.</li>
                    <li><code>cart.js</code>: Handles shopping cart operations.</li>
                    <li><code>users.js</code>: User profile management (address, wishlist).</li>
                    <li><code>analytics.js</code>: Provides aggregated data for the admin dashboard.</li>
                </ul>

                <h4>models/ (Database Schemas)</h4>
                <div class="card-grid">
                    <div class="card">
                        <h4>User (users)</h4>
                        <p>Stores user account information.</p>
                        <ul>
                            <li><code>name</code>: String</li>
                            <li><code>email</code>: String (Unique)</li>
                            <li><code>password</code>: String (Hashed)</li>
                            <li><code>role</code>: 'user' | 'admin'</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Product (products)</h4>
                        <p>Stores product inventory details.</p>
                        <ul>
                            <li><code>name</code>, <code>slug</code>: String</li>
                            <li><code>price</code>, <code>sale_price</code>: Number</li>
                            <li><code>quantity</code>: Number</li>
                            <li><code>categories</code>: ObjectId[]</li>
                            <li><code>variations</code>: Array</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Order (orders)</h4>
                        <p>Stores customer order information.</p>
                        <ul>
                            <li><code>user</code>: ObjectId</li>
                            <li><code>tracking_number</code>: String</li>
                            <li><code>total</code>: Number</li>
                            <li><code>status</code>: Object</li>
                            <li><code>products</code>: Array</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Cart (carts)</h4>
                        <p>Stores temporary shopping cart data.</p>
                        <ul>
                            <li><code>user</code>: ObjectId</li>
                            <li><code>items</code>: Array</li>
                            <li><code>totalPrice</code>: Number</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="api-deep-dive">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                    Deep Dive: Mongoose CRUD & Logic
                </h2>
                
                <div class="card-grid">
                    <div class="card">
                        <h4>1. Product Pagination & Filtering</h4>
                        <p><strong>Endpoint:</strong> <code>GET /api/products</code></p>
                        <p>Implements advanced filtering and pagination:</p>
                        <ul>
                            <li><strong>Pagination:</strong> Uses <code>limit</code> and <code>page</code> query params. Calculates <code>skip = (page - 1) * limit</code> and uses <code>Product.find().skip().limit()</code>.</li>
                            <li><strong>Search:</strong> Uses MongoDB <code>$or</code> with <code>$regex</code> for partial matching on name, description, or slug.</li>
                            <li><strong>Category:</strong> Filters by category slug by first looking up the Category ID and then filtering products.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>2. Order Creation & Stock</h4>
                        <p><strong>Endpoint:</strong> <code>POST /api/orders</code></p>
                        <p>Implements transaction-like logic:</p>
                        <ol>
                            <li>Creates a new <code>Order</code> document.</li>
                            <li>Iterates through purchased products.</li>
                            <li>Atomically decrements stock using <code>$inc: { quantity: -qty }</code>.</li>
                        </ol>
                    </div>
                    <div class="card">
                        <h4>3. Security & Middleware</h4>
                        <p><strong>Middleware:</strong> <code>verifyToken.js</code></p>
                        <ul>
                            <li><strong>verifyToken:</strong> Validates JWT for protected routes.</li>
                            <li><strong>verifyTokenAndAdmin:</strong> Checks if <code>req.user.isAdmin</code> is true for admin routes.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="storefront">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    2. Novamart Storefront
                </h2>
                <p>The customer-facing e-commerce website.</p>
                <p><strong>Tech Stack:</strong> Next.js 16 (App Router), React 19, Tailwind CSS.</p>

                <h3>Folder Structure & File Descriptions</h3>

                <h4>src/app/ (Pages & Routing)</h4>
                <ul>
                    <li><code>layout.jsx</code>: <strong>Root Layout</strong>. Wraps the entire app with providers and global styles.</li>
                    <li><code>page.jsx</code>: <strong>Home Page</strong>. Main landing page.</li>
                    <li><code>[lang]/</code>: <strong>Internationalization Route</strong>.
                        <ul>
                            <li><code>page.jsx</code>: Localized Home Page.</li>
                            <li><code>products/page.jsx</code>: Product listing/search page.</li>
                            <li><code>products/[slug]/page.jsx</code>: Single product details page.</li>
                            <li><code>checkout/page.jsx</code>: Checkout process page.</li>
                            <li><code>my-account/</code>: User dashboard pages.</li>
                        </ul>
                    </li>
                </ul>

                <h4>src/components/ (UI Components)</h4>
                <div class="card-grid">
                    <div class="card">
                        <h4>Auth</h4>
                        <ul>
                            <li><code>login-form.jsx</code>: Login form.</li>
                            <li><code>sign-up-form.jsx</code>: Registration form.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Product</h4>
                        <ul>
                            <li><code>product-card.jsx</code>: Grid item display.</li>
                            <li><code>product-details.jsx</code>: Full product view.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Checkout</h4>
                        <ul>
                            <li><code>checkout-form.jsx</code>: Address & payment.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Layouts</h4>
                        <ul>
                            <li><code>header/</code>: Navigation bar.</li>
                            <li><code>footer/</code>: Site footer.</li>
                            <li><code>cart-drawer.jsx</code>: Slide-out cart.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="admin">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                    3. Novamart Admin Panel
                </h2>
                <p>The administrative dashboard for managing the store.</p>
                <p><strong>Tech Stack:</strong> Next.js 16, React 19, Ant Design, Tailwind CSS.</p>

                <h3>Folder Structure & File Descriptions</h3>

                <h4>src/app/</h4>
                <ul>
                    <li><code>page.jsx</code>: <strong>Dashboard</strong>. Displays sales charts and recent activity.</li>
                    <li><code>products/page.jsx</code>: List of all products.</li>
                    <li><code>products/create/page.jsx</code>: Form to add a new product.</li>
                    <li><code>orders/page.jsx</code>: Order management table.</li>
                    <li><code>users/page.jsx</code>: User management table.</li>
                </ul>

                <h4>src/components/</h4>
                <div class="card-grid">
                    <div class="card">
                        <h4>Dashboard Widgets</h4>
                        <ul>
                            <li><code>SalesChart.jsx</code>: Visualizes sales data.</li>
                            <li><code>RecentOrders.jsx</code>: Latest orders table.</li>
                            <li><code>StatsCard.jsx</code>: Key metrics display.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Navigation</h4>
                        <ul>
                            <li><code>Sidebar.jsx</code>: Main admin navigation.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="admin-deep-dive">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                    Deep Dive: Admin Panel Logic
                </h2>

                <div class="card-grid">
                    <div class="card">
                        <h4>1. Data Fetching Strategy</h4>
                        <p><strong>Client-Side Fetching:</strong></p>
                        <p>Uses <code>useEffect</code> to fetch data on mount. Utilizes <code>Promise.all</code> to fetch dependent data (e.g., Products + Categories) in parallel for faster load times.</p>
                    </div>
                    <div class="card">
                        <h4>2. State Management</h4>
                        <p><strong>Local State:</strong></p>
                        <p>Uses <code>useState</code> for lists, loading states, and UI controls.</p>
                        <p><strong>Client-Side Pagination:</strong> Fetches all products (limit=1000) and handles pagination locally for a snappier UI on smaller datasets.</p>
                    </div>
                    <div class="card">
                        <h4>3. Optimistic Updates</h4>
                        <p><strong>UI Responsiveness:</strong></p>
                        <p>When deleting items, the UI updates immediately by filtering the local state array, providing instant feedback to the user.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
